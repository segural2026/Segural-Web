<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Segural | Productos</title>

  <style>
    :root{
      --bg:#ffffff;
      --muted:#f4f6f8;
      --text:#101828;
      --sub:#475467;
      --line:#e4e7ec;
      --blue:#2b6cb0;
      --blue2:#0b63ce;
      --shadow:0 10px 30px rgba(16,24,40,.08);
      --r:18px;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Arial,sans-serif;background:var(--bg);color:var(--text)}
    header{
      position:sticky;top:0;z-index:1000;
      background:rgba(255,255,255,.92);
      backdrop-filter:blur(10px);
      border-bottom:1px solid var(--line);
      box-shadow:0 6px 20px rgba(16,24,40,.06);
    }
    .nav-wrap{
      max-width:1150px;margin:0 auto;padding:14px 18px;
      display:flex;align-items:center;justify-content:space-between;gap:14px;
    }
    .brand{
      display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--text);
      font-weight:800;letter-spacing:.2px;font-size:20px;
    }
    .brand-badge{
      width:40px;height:40px;border-radius:14px;
      background:linear-gradient(135deg,var(--blue),#1f3c88);
      box-shadow:0 10px 20px rgba(43,108,176,.25);
      display:grid;place-items:center;color:#fff;font-weight:900;
    }
    nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .nav-link{
      text-decoration:none;color:var(--sub);
      padding:10px 12px;border-radius:12px;border:1px solid transparent;
      transition:.2s ease;font-weight:700;font-size:14px;
    }
    .nav-link:hover{color:var(--text);background:var(--muted);border-color:var(--line)}
    .nav-link.primary{
      color:#fff;background:linear-gradient(135deg,var(--blue2),var(--blue));
      border-color:rgba(43,108,176,.25);
      box-shadow:0 10px 20px rgba(11,99,206,.20);
    }

    .container{max-width:1150px;margin:0 auto;padding:26px 18px 90px}
    .top{
      padding:22px;border:1px solid var(--line);border-radius:var(--r);
      background:linear-gradient(180deg,#ffffff,#fafbfc);
      box-shadow:var(--shadow);
      position:relative;overflow:hidden;
    }
    .top::before{
      content:"";position:absolute;inset:-120px -120px auto auto;
      width:260px;height:260px;
      background:radial-gradient(circle,rgba(43,108,176,.18),rgba(43,108,176,0) 60%);
      pointer-events:none;
    }
    h1{margin:0 0 8px 0;font-size:28px}
    p{margin:0;color:var(--sub);line-height:1.6}

    .controls{
      margin-top:16px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;
    }
    .input, .select{
      padding:12px 12px;border-radius:14px;border:1px solid var(--line);
      background:#fff;min-width:220px;outline:none;
      box-shadow:0 6px 16px rgba(16,24,40,.05);
    }
    .btn{
      padding:12px 14px;border-radius:14px;border:1px solid rgba(11,99,206,.20);
      background:rgba(11,99,206,.08);color:var(--blue2);
      font-weight:800;cursor:pointer;transition:.2s ease;
    }
    .btn:hover{transform:translateY(-1px);filter:brightness(1.02)}

    .grid{
      margin-top:18px;
      display:grid;grid-template-columns:repeat(12,1fr);gap:14px;
    }
    .card{
      grid-column:span 4;
      border:1px solid var(--line);border-radius:18px;background:#fff;
      box-shadow:0 10px 25px rgba(16,24,40,.06);
      overflow:hidden;
      display:flex;flex-direction:column;
    }
    .thumb{
      height:170px;background:linear-gradient(180deg,#f7f9fc,#ffffff);
      border-bottom:1px solid var(--line);
      display:grid;place-items:center;
    }
    .thumb img{max-width:100%;max-height:100%;object-fit:cover}
    .thumb .noimg{
      color:var(--sub);font-weight:800;
      border:1px dashed var(--line);
      padding:10px 12px;border-radius:14px;background:#fff;
    }
    .content{padding:14px}
    .title{font-weight:900;margin:0 0 6px 0}
    .meta{color:var(--sub);font-size:13.5px;line-height:1.5;margin:0 0 10px 0}
    .price{
      display:inline-block;
      font-weight:900;
      padding:8px 10px;border-radius:12px;
      border:1px solid var(--line);
      background:var(--muted);
      margin-bottom:10px;
    }
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .buy{
      text-decoration:none;
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:14px;
      background:#25D366;color:#fff;font-weight:900;
      box-shadow:0 12px 26px rgba(0,0,0,.12);
    }
    .buy:hover{filter:brightness(1.02);transform:translateY(-1px)}
    .ghost{
      text-decoration:none;
      padding:10px 12px;border-radius:14px;
      border:1px solid var(--line);
      background:#fff;color:var(--text);
      font-weight:800;
    }

    .empty{
      margin-top:16px;
      padding:16px;border:1px solid var(--line);border-radius:18px;
      background:var(--muted);color:var(--sub);font-weight:800;
    }

    .wa-float{
      position:fixed;right:18px;bottom:18px;z-index:9999;
      display:flex;align-items:center;gap:10px;text-decoration:none;
      background:#25D366;color:#fff;padding:12px 14px;border-radius:999px;
      box-shadow:0 12px 30px rgba(0,0,0,.18);
      font-weight:900;border:1px solid rgba(255,255,255,.25);
      transition:.2s ease;
    }
    .wa-float:hover{transform:translateY(-2px);filter:brightness(1.02)}
    .wa-icon{
      width:34px;height:34px;border-radius:999px;
      background:rgba(255,255,255,.18);
      display:grid;place-items:center;font-size:18px;
    }

    @media (max-width: 980px){ .card{grid-column:span 6;} }
    @media (max-width: 620px){ .card{grid-column:span 12;} .input,.select{min-width:100%} }
  </style>
</head>

<body>
  <header>
    <div class="nav-wrap">
      <a class="brand" href="index.html" aria-label="Ir al inicio">
        <span class="brand-badge">S</span><span>Segural</span>
      </a>

      <nav aria-label="Navegaci√≥n principal">
        <a class="nav-link" href="index.html">Inicio</a>
        <a class="nav-link primary" href="productos.html">Productos</a>
        <a class="nav-link" href="index.html#nosotros">Sobre nosotros</a>
        <a class="nav-link" href="admin.html">Admin</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="top">
      <h1>Productos</h1>
      <p>
        Eleg√≠ una categor√≠a y consultanos por WhatsApp. Los productos se cargan desde <b>Admin</b>.
      </p>

      <div class="controls">
        <input id="q" class="input" type="search" placeholder="Buscar (ej: c√°mara, alarma, motor...)" />
        <select id="cat" class="select">
          <option value="todas">Todas las categor√≠as</option>
          <option value="Alarmas">Alarmas</option>
          <option value="C√°maras">C√°maras</option>
          <option value="Porteros">Porteros</option>
          <option value="Portones">Equipos de portones</option>
          <option value="Otros">Otros</option>
        </select>
        <button class="btn" id="btnReset" type="button">Limpiar filtros</button>
      </div>
    </section>

    <div id="list" class="grid" aria-label="Listado de productos"></div>
    <div id="empty" class="empty" style="display:none;">
      No hay productos para mostrar. Cargalos desde <b>Admin</b>.
    </div>
  </main>

  <a class="wa-float"
     href="https://wa.me/5491155034755?text=Hola%20Segural%2C%20quiero%20hacer%20una%20consulta."
     target="_blank" rel="noopener" aria-label="Abrir WhatsApp">
    <span class="wa-icon">üí¨</span> WhatsApp
  </a>

  <script>
    const WHATSAPP_NUMBER = "5491155034755"; // cambiar si quer√©s otro n√∫mero
    const STORAGE_KEY = "segural_products_v1";

    const $list = document.getElementById("list");
    const $empty = document.getElementById("empty");
    const $q = document.getElementById("q");
    const $cat = document.getElementById("cat");
    const $btnReset = document.getElementById("btnReset");

    function moneyARS(value){
      const n = Number(value || 0);
      return n.toLocaleString("es-AR", { style: "currency", currency: "ARS", maximumFractionDigits: 0 });
    }

    function loadProducts(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        const arr = raw ? JSON.parse(raw) : [];
        return Array.isArray(arr) ? arr : [];
      }catch(e){ return []; }
    }

    function buildWhatsAppLink(p){
      const text = `Hola Segural, quiero consultar por: ${p.nombre}${p.precio ? " - " + moneyARS(p.precio) : ""}. Categoria: ${p.categoria}.`;
      return `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`;
    }

    function render(products){
      $list.innerHTML = "";

      if(!products.length){
        $empty.style.display = "block";
        return;
      }
      $empty.style.display = "none";

      for(const p of products){
        const card = document.createElement("article");
        card.className = "card";

        const thumb = document.createElement("div");
        thumb.className = "thumb";
        if(p.imagen){
          const img = document.createElement("img");
          img.src = p.imagen;
          img.alt = p.nombre || "Producto";
          thumb.appendChild(img);
        }else{
          const no = document.createElement("div");
          no.className = "noimg";
          no.textContent = "Sin imagen";
          thumb.appendChild(no);
        }

        const content = document.createElement("div");
        content.className = "content";

        const title = document.createElement("p");
        title.className = "title";
        title.textContent = p.nombre || "Producto";

        const meta = document.createElement("p");
        meta.className = "meta";
        meta.textContent = `${p.categoria || "Sin categor√≠a"} ‚Ä¢ ${p.descripcion || "Sin descripci√≥n"}`;

        const price = document.createElement("span");
        price.className = "price";
        price.textContent = p.precio ? moneyARS(p.precio) : "Consultar precio";

        const actions = document.createElement("div");
        actions.className = "actions";

        const buy = document.createElement("a");
        buy.className = "buy";
        buy.href = buildWhatsAppLink(p);
        buy.target = "_blank";
        buy.rel = "noopener";
        buy.textContent = "Comprar por WhatsApp";

        const more = document.createElement("a");
        more.className = "ghost";
        more.href = buildWhatsAppLink(p);
        more.target = "_blank";
        more.rel = "noopener";
        more.textContent = "Consultar";

        actions.appendChild(buy);
        actions.appendChild(more);

        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(price);
        content.appendChild(actions);

        card.appendChild(thumb);
        card.appendChild(content);

        $list.appendChild(card);
      }
    }

    function applyFilters(){
      const all = loadProducts();
      const q = ($q.value || "").trim().toLowerCase();
      const cat = $cat.value;

      let filtered = all;

      if(cat !== "todas"){
        filtered = filtered.filter(p => (p.categoria || "") === cat);
      }
      if(q){
        filtered = filtered.filter(p => {
          const t = `${p.nombre||""} ${p.descripcion||""} ${p.categoria||""}`.toLowerCase();
          return t.includes(q);
        });
      }

      render(filtered);
    }

    $q.addEventListener("input", applyFilters);
    $cat.addEventListener("change", applyFilters);
    $btnReset.addEventListener("click", () => {
      $q.value = "";
      $cat.value = "todas";
      applyFilters();
    });

    // Init
    applyFilters();
  </script>
</body>
</html>
